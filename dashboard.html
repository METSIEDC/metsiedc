<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - MET'S IEDC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Softer, light blue-gray background */
            color: #334155; /* Darker text for better contrast */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* More subtle, wider shadow */
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        main {
            flex-grow: 1;
            padding: 2.5rem 0; /* Increased padding */
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        footer {
            background-color: #1a202c; /* Darker footer */
            color: #cbd5e1;
            padding: 2rem 0;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem; /* Increased horizontal padding */
        }
        .text-brand-primary {
            color: #2563eb; /* Consistent primary blue */
        }
        .bg-brand-primary {
            background-color: #2563eb;
        }
        .hover\:bg-brand-primary-dark:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3); /* Lighter spinner border */
            border-left-color: #ffffff; /* White spinner color */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tab-button {
            padding: 0.8rem 1.75rem; /* Increased padding */
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: #64748b; /* Gray text for inactive tabs */
            transition: all 0.3s ease-in-out; /* Smoother transition */
            border-radius: 0.5rem 0.5rem 0 0; /* Rounded top corners */
        }
        .tab-button.active {
            border-bottom-color: #2563eb; /* Primary blue for active tab */
            color: #2563eb;
            font-weight: 600;
            background-color: #f8fafc; /* Slightly lighter background for active tab */
        }
        .tab-button:hover:not(.active) {
            color: #3b82f6; /* Lighter blue on hover */
            background-color: #eff6ff; /* Lightest blue on hover */
        }
        .tab-content {
            display: none;
            padding: 2rem; /* Consistent padding for content */
            background-color: #ffffff;
            border-radius: 0.75rem; /* More rounded corners for content */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Deeper shadow */
        }
        .tab-content.active {
            display: block;
        }
        /* Form input styling */
        input[type="text"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        input[type="url"],
        textarea,
        select {
            border: 1px solid #cbd5e1; /* Lighter border */
            border-radius: 0.5rem; /* Rounded corners */
            padding: 0.75rem 1rem; /* Increased padding */
            transition: all 0.2s ease-in-out;
            font-size: 1rem; /* Ensure consistent font size */
        }
        input[type="text"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        input[type="number"]:focus,
        input[type="url"]:focus,
        textarea:focus,
        select:focus {
            border-color: #2563eb; /* Primary blue on focus */
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2); /* Subtle focus ring */
            outline: none;
        }
        /* Button styling */
        button[type="submit"] {
            padding: 0.85rem 1.5rem; /* Larger buttons */
            font-weight: 600;
            border-radius: 0.5rem; /* Rounded button corners */
            transition: all 0.3s ease-in-out;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Subtle button shadow */
        }
        button[type="submit"]:hover {
            transform: translateY(-1px); /* Slight lift on hover */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Deeper shadow on hover */
        }
        /* Specific button colors */
        .bg-green-600 { background-color: #10b981; } /* Tailwind emerald-500 */
        .hover\:bg-green-700:hover { background-color: #059669; } /* Tailwind emerald-600 */
        .bg-blue-600 { background-color: #3b82f6; } /* Tailwind blue-500 */
        .hover\:bg-blue-700:hover { background-color: #2563eb; } /* Tailwind blue-600 */
        .bg-purple-600 { background-color: #8b5cf6; } /* Tailwind violet-500 */
        .hover\:bg-purple-700:hover { background-color: #7c3aed; } /* Tailwind violet-600 */
        .bg-orange-600 { background-color: #f97316; } /* Tailwind orange-500 */
        .hover\:bg-orange-700:hover { background-color: #ea580c; } /* Tailwind orange-600 */
        .bg-red-600 { background-color: #ef4444; } /* Tailwind red-500 */
        .hover\:bg-red-700:hover { background-color: #dc2626; } /* Tailwind red-600 */

        /* Status Message Styling */
        .status-message {
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            font-weight: 500;
        }
        .status-message.error {
            background-color: #fee2e2; /* Red-100 */
            color: #ef4444; /* Red-500 */
            border: 1px solid #fca5a5; /* Red-300 */
        }
        .status-message.success {
            background-color: #d1fae5; /* Green-100 */
            color: #10b981; /* Green-500 */
            border: 1px solid #6ee7b7; /* Green-300 */
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .tab-content.grid {
                grid-template-columns: 1fr 1.5fr; /* Adjust column ratio for profile section */
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container flex items-center justify-between">
            <a href="index.html" class="flex items-center space-x-3">
                <img src="data:image/jpeg;base64,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REQEREEB+U3BampfSGniLwx0msgja5itxP1XKmfctVBmixCgaTOxw1tFgTb2X78fokcxbop+iCGYri2MxujlhpRJG+JhfESNbJd9Qu03PLr9i1GGYJX1uIR19ZCKdkWnS33jpuWi3Hibkmy6UiDneacv10NcMToGiQm2uPa99Iadri4Itw3usHFqXGMWMcM1OKaFrtTietrX3NzsTYAc11JEEI+UjAppaKGCljL/AA5GeUWuGNje2+/qFbz9lyaoo4DCwmeDRsCAbFoDgN+RDT9inaIINlvLctPhM8JZ8/PHOS3a+pzHMY2/oB95VjAsDqmYNNTPiIlcJdLDa5va3Oy6AiDn+E4FVNwWWldGRM4SWYSLm7rjmtflyoxuigbTsoA4NLjdzhfzOLuTu66giCA58w2uraGntB89ra+SMEeXyPB4nuFiPqcwywimZSshGgRmTUA4N0huxL9vsBXSUQRXK2To6WkkppCHunDhM4bDdpGlt+Qud+59FFMLoMZwl744IRUwvdcW3F+GqwN2mwF+S6qiCOZTnxOUySVzGRNOgRRNtcW1aidyd7t4nlwCkaIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiIP/Z" alt="IEDC Logo" class="h-12 w-12 rounded-full shadow-md">
                <span class="text-3xl font-extrabold text-brand-primary">MET'S IEDC</span>
            </a>
            <nav>
                <button id="logoutBtn" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300 shadow-md">Logout</button>
            </nav>
        </div>
    </header>

    <main>
        <div class="max-w-5xl w-full mx-4">
            <h1 class="text-4xl font-extrabold text-gray-800 mb-4 text-center">Your User Dashboard</h1>
            <p class="text-lg text-gray-600 mb-8 text-center">Welcome back! Manage your profile and submissions here.</p>
            <p class="text-lg text-gray-700 mb-8 text-center">Logged in as: <span id="userEmail" class="font-semibold text-brand-primary">Loading...</span></p>

            <div class="flex flex-wrap justify-center border-b border-gray-200 mb-8 bg-white rounded-t-lg shadow-sm">
                <button id="profileTabBtn" class="tab-button active" onclick="showTab('profile')">My Profile</button>
                <button id="submitProjectTabBtn" class="tab-button" onclick="showTab('submitProject')">Submit Project</button>
                <button id="submitIdeaTabBtn" class="tab-button" onclick="showTab('submitIdea')">Submit Idea</button>
                <button id="submitEventTabBtn" class="tab-button" onclick="showTab('submitEvent')">Submit Event</button>
            </div>

            <div id="profileSection" class="tab-content active grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-inner">
                    <h3 class="text-2xl font-bold text-gray-800 mb-5 border-b pb-3 border-gray-200">Your Profile Information</h3>
                    <div class="space-y-3 text-gray-700">
                        <p><span class="font-semibold text-gray-800">Name:</span> <span id="displayNameOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Bio:</span> <span id="bioOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Contact:</span> <span id="contactNumberOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Gender:</span> <span id="genderOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Date of Birth:</span> <span id="dobOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Address:</span> <span id="addressOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">City:</span> <span id="cityOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">State:</span> <span id="stateOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Pincode:</span> <span id="pincodeOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Qualification:</span> <span id="qualificationOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Skills:</span> <span id="skillsOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">LinkedIn:</span> <span id="linkedinOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Instagram:</span> <span id="instagramOutput">Not set</span></p>
                        <p><span class="font-semibold text-gray-800">Preferred Communication:</span> <span id="communicationOutput">Not set</span></p>
                    </div>
                </div>

                <div class="text-left p-6 bg-white rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Update Your Profile</h2>
                    <div id="profileStatusMessage" class="status-message hidden"></div>

                    <form id="profileForm" class="space-y-4">
                        <div>
                            <label for="profileName" class="block text-gray-700 text-sm font-bold mb-2">Name:</label>
                            <input type="text" id="profileName" class="w-full" placeholder="Your Full Name">
                        </div>

                        <div>
                            <label for="profileBio" class="block text-gray-700 text-sm font-bold mb-2">Bio:</label>
                            <textarea id="profileBio" rows="3" class="w-full" placeholder="Tell us about yourself..."></textarea>
                        </div>

                        <div>
                            <label for="profileContact" class="block text-gray-700 text-sm font-bold mb-2">Contact Number:</label>
                            <input type="tel" id="profileContact" class="w-full" placeholder="e.g., +91 9876543210">
                        </div>

                        <div>
                            <label for="profileGender" class="block text-gray-700 text-sm font-bold mb-2">Gender:</label>
                            <select id="profileGender" class="w-full">
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>

                        <div>
                            <label for="profileDob" class="block text-gray-700 text-sm font-bold mb-2">Date of Birth:</label>
                            <input type="date" id="profileDob" class="w-full">
                        </div>

                        <div>
                            <label for="profileAddress" class="block text-gray-700 text-sm font-bold mb-2">Address:</label>
                            <textarea id="profileAddress" rows="2" class="w-full" placeholder="Street, Locality"></textarea>
                        </div>

                        <div>
                            <label for="profileCity" class="block text-gray-700 text-sm font-bold mb-2">City:</label>
                            <input type="text" id="profileCity" class="w-full" placeholder="Your City">
                        </div>

                        <div>
                            <label for="profileState" class="block text-gray-700 text-sm font-bold mb-2">State:</label>
                            <input type="text" id="profileState" class="w-full" placeholder="Your State">
                        </div>

                        <div>
                            <label for="profilePincode" class="block text-gray-700 text-sm font-bold mb-2">Pincode:</label>
                            <input type="number" id="profilePincode" class="w-full" placeholder="e.g., 680001">
                        </div>

                        <div>
                            <label for="profileQualification" class="block text-gray-700 text-sm font-bold mb-2">Educational Qualification:</label>
                            <select id="profileQualification" class="w-full">
                                <option value="">Select Qualification</option>
                                <option value="High School">High School</option>
                                <option value="Diploma">Diploma</option>
                                <option value="Bachelor's Degree">Bachelor's Degree</option>
                                <option value="Master's Degree">Master's Degree</option>
                                <option value="PhD">PhD</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div>
                            <label for="profileSkills" class="block text-gray-700 text-sm font-bold mb-2">Skills (comma-separated):</label>
                            <input type="text" id="profileSkills" class="w-full" placeholder="e.g., JavaScript, Python, UI/UX Design">
                        </div>

                        <hr class="border-gray-200 my-4">

                        <h3 class="text-lg font-bold text-gray-800 mb-2">Social & Web Links</h3>
                        <div>
                            <label for="profileLinkedIn" class="block text-gray-700 text-sm font-bold mb-2">LinkedIn Profile URL:</label>
                            <input type="url" id="profileLinkedIn" class="w-full" placeholder="https://linkedin.com/in/yourprofile">
                        </div>
                        <div>
                            <label for="profileInstagram" class="block text-gray-700 text-sm font-bold mb-2">Instagram Profile URL:</label>
                            <input type="url" id="profileInstagram" class="w-full" placeholder="https://instagram.com/yourhandle">
                        </div>

                        <hr class="border-gray-200 my-4">

                        <h3 class="text-lg font-bold text-gray-800 mb-2">Communication Preferences</h3>
                        <div>
                            <label for="profileCommunicationMethod" class="block text-gray-700 text-sm font-bold mb-2">Preferred Communication Method:</label>
                            <select id="profileCommunicationMethod" class="w-full">
                                <option value="">Select Method</option>
                                <option value="Email">Email</option>
                                <option value="Phone">Phone</option>
                                <option value="WhatsApp">WhatsApp</option>
                                <option value="Telegram">Telegram</option>
                            </select>
                        </div>

                        <button type="submit" id="saveProfileBtn" class="w-full bg-green-600 text-white flex items-center justify-center">
                            <span id="saveProfileBtnText">Save Profile</span>
                            <div id="saveProfileSpinner" class="loading-spinner ml-2 hidden"></div>
                        </button>
                    </form>
                </div>
            </div>

            <div id="submitProjectSection" class="tab-content">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-left">Submit a New Project</h2>
                <div id="projectStatusMessage" class="status-message hidden"></div>

                <form id="projectForm" class="space-y-4 text-left">
                    <div>
                        <label for="projectTitle" class="block text-gray-700 text-sm font-bold mb-2">Project Title:</label>
                        <input type="text" id="projectTitle" class="w-full" placeholder="e.g., Smart Waste Management System">
                    </div>
                    <div>
                        <label for="projectDescription" class="block text-gray-700 text-sm font-bold mb-2">Project Description:</label>
                        <textarea id="projectDescription" rows="4" class="w-full" placeholder="Briefly describe your project, its purpose, and key features."></textarea>
                    </div>
                    <div>
                        <label for="projectTeamMembers" class="block text-gray-700 text-sm font-bold mb-2">Team Members (comma-separated):</label>
                        <input type="text" id="projectTeamMembers" class="w-full" placeholder="e.g., John Doe, Jane Smith">
                    </div>
                    <div>
                        <label for="projectTechnologies" class="block text-gray-700 text-sm font-bold mb-2">Technologies Used (comma-separated):</label>
                        <input type="text" id="projectTechnologies" class="w-full" placeholder="e.g., Python, Arduino, Machine Learning">
                    </div>
                    <div>
                        <label for="projectUrl" class="block text-gray-700 text-sm font-bold mb-2">Project URL (Optional):</label>
                        <input type="url" id="projectUrl" class="w-full" placeholder="https://github.com/yourproject">
                    </div>
                    <div>
                        <label for="projectStatus" class="block text-gray-700 text-sm font-bold mb-2">Project Status:</label>
                        <select id="projectStatus" class="w-full">
                            <option value="">Select Status</option>
                            <option value="Idea Phase">Idea Phase</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                            <option value="Deployed">Deployed</option>
                        </select>
                    </div>
                    <button type="submit" id="submitProjectBtn" class="w-full bg-blue-600 text-white flex items-center justify-center">
                        <span id="submitProjectBtnText">Submit Project</span>
                        <div id="submitProjectSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

            <div id="submitIdeaSection" class="tab-content">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-left">Submit a New Idea</h2>
                <div id="ideaStatusMessage" class="status-message hidden"></div>

                <form id="ideaForm" class="space-y-4 text-left">
                    <div>
                        <label for="ideaTitle" class="block text-gray-700 text-sm font-bold mb-2">Idea Title:</label>
                        <input type="text" id="ideaTitle" class="w-full" placeholder="e.g., AI-Powered Study Buddy">
                    </div>
                    <div>
                        <label for="ideaDescription" class="block text-gray-700 text-sm font-bold mb-2">Idea Description:</label>
                        <textarea id="ideaDescription" rows="4" class="w-full" placeholder="Explain your idea in detail. What is it? How does it work?"></textarea>
                    </div>
                    <div>
                        <label for="ideaProblemSolved" class="block text-gray-700 text-sm font-bold mb-2">Problem Solved:</label>
                        <textarea id="ideaProblemSolved" rows="2" class="w-full" placeholder="What real-world problem does your idea address?"></textarea>
                    </div>
                    <div>
                        <label for="ideaTargetAudience" class="block text-gray-700 text-sm font-bold mb-2">Target Audience:</label>
                        <input type="text" id="ideaTargetAudience" class="w-full" placeholder="e.g., College students, Small businesses">
                    </div>
                    <div>
                        <label for="ideaInnovationLevel" class="block text-gray-700 text-sm font-bold mb-2">Innovation Level:</label>
                        <select id="ideaInnovationLevel" class="w-full">
                            <option value="">Select Level</option>
                            <option value="Incremental">Incremental Improvement</option>
                            <option value="Moderate">Moderate Innovation</option>
                            <option value="Disruptive">Disruptive Innovation</option>
                        </select>
                    </div>
                    <button type="submit" id="submitIdeaBtn" class="w-full bg-purple-600 text-white flex items-center justify-center">
                        <span id="submitIdeaBtnText">Submit Idea</span>
                        <div id="submitIdeaSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

            <div id="submitEventSection" class="tab-content">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-left">Submit a New Event</h2>
                <div id="eventStatusMessage" class="status-message hidden"></div>

                <form id="eventForm" class="space-y-4 text-left">
                    <div>
                        <label for="eventTitle" class="block text-gray-700 text-sm font-bold mb-2">Event Title:</label>
                        <input type="text" id="eventTitle" class="w-full" placeholder="e.g., Annual Hackathon 2025">
                    </div>
                    <div>
                        <label for="eventDescription" class="block text-gray-700 text-sm font-bold mb-2">Event Description:</label>
                        <textarea id="eventDescription" rows="4" class="w-full" placeholder="Provide a detailed description of the event."></textarea>
                    </div>
                    <div>
                        <label for="eventVenue" class="block text-gray-700 text-sm font-bold mb-2">Event Venue:</label>
                        <input type="text" id="eventVenue" class="w-full" placeholder="e.g., College Auditorium, Online">
                    </div>
                    <div>
                        <label for="eventOrganizer" class="block text-gray-700 text-sm font-bold mb-2">Organizer (Optional):</label>
                        <input type="text" id="eventOrganizer" class="w-full" placeholder="e.g., IEDC Core Team">
                    </div>
                    <div>
                        <label for="eventRegistrationUrl" class="block text-gray-700 text-sm font-bold mb-2">Registration URL (Optional):</label>
                        <input type="url" id="eventRegistrationUrl" class="w-full" placeholder="https://forms.gle/event_registration">
                    </div>
                    <button type="submit" id="submitEventBtn" class="w-full bg-orange-600 text-white flex items-center justify-center">
                        <span id="submitEventBtnText">Submit Event</span>
                        <div id="submitEventSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 MET'S IEDC. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAIn9hB7Hx4Nwwk5Ar9bE3tFuo40VkBcc8",
            authDomain: "metsiedc-3010e.firebaseapp.com",
            databaseURL: "https://metsiedc-3010e-default-rtdb.firebaseio.com",
            projectId: "metsiedc-3010e",
            messagingSenderId: "954403413150",
            appId: "1:954403413150:web:2523a3377f15a3d6002f8f",
            measurementId: "G-6E7EK0D7JG"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app); // Initialize Firestore

        // Global variable to store current user object
        let currentUser = null;

        // --- DOM Elements ---
        // General
        const userEmailElement = document.getElementById('userEmail');
        const logoutBtn = document.getElementById('logoutBtn');

        // Tabs
        const profileTabBtn = document.getElementById('profileTabBtn');
        const submitProjectTabBtn = document.getElementById('submitProjectTabBtn');
        const submitIdeaTabBtn = document.getElementById('submitIdeaTabBtn');
        const submitEventTabBtn = document.getElementById('submitEventTabBtn');

        const profileSection = document.getElementById('profileSection');
        const submitProjectSection = document.getElementById('submitProjectSection');
        const submitIdeaSection = document.getElementById('submitIdeaSection');
        const submitEventSection = document.getElementById('submitEventSection');

        // Profile Form Inputs
        const profileNameInput = document.getElementById('profileName');
        const profileBioInput = document.getElementById('profileBio');
        const profileContactInput = document.getElementById('profileContact');
        const profileGenderInput = document.getElementById('profileGender');
        const profileDobInput = document.getElementById('profileDob');
        const profileAddressInput = document.getElementById('profileAddress');
        const profileCityInput = document.getElementById('profileCity');
        const profileStateInput = document.getElementById('profileState');
        const profilePincodeInput = document.getElementById('profilePincode');
        const profileQualificationInput = document.getElementById('profileQualification');
        const profileSkillsInput = document.getElementById('profileSkills');
        const profileLinkedInInput = document.getElementById('profileLinkedIn');
        const profileInstagramInput = document.getElementById('profileInstagram');
        const profileCommunicationMethodInput = document.getElementById('profileCommunicationMethod');

        // Profile Display Outputs
        const displayNameOutput = document.getElementById('displayNameOutput');
        const bioOutput = document.getElementById('bioOutput');
        const contactNumberOutput = document.getElementById('contactNumberOutput');
        const genderOutput = document.getElementById('genderOutput');
        const dobOutput = document.getElementById('dobOutput');
        const addressOutput = document.getElementById('addressOutput');
        const cityOutput = document.getElementById('cityOutput');
        const stateOutput = document.getElementById('stateOutput');
        const pincodeOutput = document.getElementById('pincodeOutput');
        const qualificationOutput = document.getElementById('qualificationOutput');
        const skillsOutput = document.getElementById('skillsOutput');
        const linkedinOutput = document.getElementById('linkedinOutput');
        const instagramOutput = document.getElementById('instagramOutput');
        const communicationOutput = document.getElementById('communicationOutput');

        // Profile Save Button & Status
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const saveProfileBtnText = document.getElementById('saveProfileBtnText');
        const saveProfileSpinner = document.getElementById('saveProfileSpinner');
        const profileStatusMessage = document.getElementById('profileStatusMessage');

        // Project Form Inputs
        const projectTitleInput = document.getElementById('projectTitle');
        const projectDescriptionInput = document.getElementById('projectDescription');
        const projectTeamMembersInput = document.getElementById('projectTeamMembers');
        const projectTechnologiesInput = document.getElementById('projectTechnologies');
        const projectUrlInput = document.getElementById('projectUrl');
        const projectStatusInput = document.getElementById('projectStatus');

        // Project Submit Button & Status
        const submitProjectBtn = document.getElementById('submitProjectBtn');
        const submitProjectBtnText = document.getElementById('submitProjectBtnText');
        const submitProjectSpinner = document.getElementById('submitProjectSpinner');
        const projectStatusMessage = document.getElementById('projectStatusMessage');

        // Idea Form Inputs
        const ideaTitleInput = document.getElementById('ideaTitle');
        const ideaDescriptionInput = document.getElementById('ideaDescription');
        const ideaProblemSolvedInput = document.getElementById('ideaProblemSolved');
        const ideaTargetAudienceInput = document.getElementById('ideaTargetAudience');
        const ideaInnovationLevelInput = document.getElementById('ideaInnovationLevel');

        // Idea Submit Button & Status
        const submitIdeaBtn = document.getElementById('submitIdeaBtn');
        const submitIdeaBtnText = document.getElementById('submitIdeaBtnText');
        const submitIdeaSpinner = document.getElementById('submitIdeaSpinner');
        const ideaStatusMessage = document.getElementById('ideaStatusMessage');

        // Event Form Inputs
        const eventTitleInput = document.getElementById('eventTitle');
        const eventDescriptionInput = document.getElementById('eventDescription');
        const eventVenueInput = document.getElementById('eventVenue');
        const eventOrganizerInput = document.getElementById('eventOrganizer');
        const eventRegistrationUrlInput = document.getElementById('eventRegistrationUrl');

        // Event Submit Button & Status
        const submitEventBtn = document.getElementById('submitEventBtn');
        const submitEventBtnText = document.getElementById('submitEventBtnText');
        const submitEventSpinner = document.getElementById('submitEventSpinner');
        const eventStatusMessage = document.getElementById('eventStatusMessage');


        // --- Functions ---

        // Function to display status messages for forms
        function showStatusMessage(element, message, type = 'error') { /* Default to error for safety */
            element.textContent = message;
            element.classList.remove('hidden', 'status-message', 'error', 'success'); /* Clear all status classes */
            element.classList.add('status-message', type); /* Add base and type class */
            element.classList.remove('hidden');
            setTimeout(() => {
                element.classList.add('hidden');
            }, 5000); // Hide after 5 seconds
        }

        // Function to switch tabs
        window.showTab = function(tabName) {
            // Deactivate all tab buttons and hide all tab contents
            profileTabBtn.classList.remove('active');
            submitProjectTabBtn.classList.remove('active');
            submitIdeaTabBtn.classList.remove('active');
            submitEventTabBtn.classList.remove('active');

            profileSection.classList.remove('active');
            submitProjectSection.classList.remove('active');
            submitIdeaSection.classList.remove('active');
            submitEventSection.classList.remove('active');

            // Activate the selected tab button and show its content
            if (tabName === 'profile') {
                profileTabBtn.classList.add('active');
                profileSection.classList.add('active');
            } else if (tabName === 'submitProject') {
                submitProjectTabBtn.classList.add('active');
                submitProjectSection.classList.add('active');
            } else if (tabName === 'submitIdea') {
                submitIdeaTabBtn.classList.add('active');
                submitIdeaSection.classList.add('active');
            } else if (tabName === 'submitEvent') {
                submitEventTabBtn.classList.add('active');
                submitEventSection.classList.add('active');
            }
        }

        // Function to load user profile from Firestore
        async function loadUserProfile(user) {
            const userDocRef = doc(db, 'users', user.uid);
            try {
                const userDocSnap = await getDoc(userDocRef);
                if (userDocSnap.exists()) {
                    const data = userDocSnap.data();
                    // Populate form fields
                    profileNameInput.value = data.displayName || '';
                    profileBioInput.value = data.bio || '';
                    profileContactInput.value = data.contactNumber || '';
                    profileGenderInput.value = data.gender || '';
                    profileDobInput.value = data.dob || ''; // Date input expects YYYY-MM-DD
                    profileAddressInput.value = data.address || '';
                    profileCityInput.value = data.city || '';
                    profileStateInput.value = data.state || '';
                    profilePincodeInput.value = data.pincode || '';
                    profileQualificationInput.value = data.qualification || '';
                    profileSkillsInput.value = data.skills || '';
                    profileLinkedInInput.value = data.linkedin || '';
                    profileInstagramInput.value = data.instagram || '';
                    profileCommunicationMethodInput.value = data.communicationMethod || '';

                    // Update display section
                    displayNameOutput.textContent = data.displayName || 'Not set';
                    bioOutput.textContent = data.bio || 'Not set';
                    contactNumberOutput.textContent = data.contactNumber || 'Not set';
                    genderOutput.textContent = data.gender || 'Not set';
                    dobOutput.textContent = data.dob || 'Not set';
                    addressOutput.textContent = data.address || 'Not set';
                    cityOutput.textContent = data.city || 'Not set';
                    stateOutput.textContent = data.state || 'Not set';
                    pincodeOutput.textContent = data.pincode || 'Not set';
                    qualificationOutput.textContent = data.qualification || 'Not set';
                    skillsOutput.textContent = data.skills || 'Not set';
                    linkedinOutput.textContent = data.linkedin || 'Not set';
                    instagramOutput.textContent = data.instagram || 'Not set';
                    communicationOutput.textContent = data.communicationMethod || 'Not set';

                } else {
                    // If user document doesn't exist, create a basic one with default empty values
                    await setDoc(userDocRef, {
                        email: user.email,
                        displayName: user.displayName || '',
                        bio: '',
                        contactNumber: '',
                        gender: '',
                        dob: '',
                        address: '',
                        city: '',
                        state: '',
                        pincode: '',
                        qualification: '',
                        skills: '',
                        linkedin: '',
                        instagram: '',
                        communicationMethod: '',
                        createdAt: new Date()
                    }, { merge: true });
                    profileNameInput.value = user.displayName || '';

                    // Update display section with defaults
                    displayNameOutput.textContent = user.displayName || 'Not set';
                    bioOutput.textContent = 'Not set';
                    contactNumberOutput.textContent = 'Not set';
                    genderOutput.textContent = 'Not set';
                    dobOutput.textContent = 'Not set';
                    addressOutput.textContent = 'Not set';
                    cityOutput.textContent = 'Not set';
                    stateOutput.textContent = 'Not set';
                    pincodeOutput.textContent = 'Not set';
                    qualificationOutput.textContent = 'Not set';
                    skillsOutput.textContent = 'Not set';
                    linkedinOutput.textContent = 'Not set';
                    instagramOutput.textContent = 'Not set';
                    communicationOutput.textContent = 'Not set';
                }
            } catch (error) {
                console.error("Error loading user profile:", error);
                showStatusMessage(profileStatusMessage, "Failed to load profile data.", "error");
            }
        }

        // --- Event Listeners ---

        // Listen for authentication state changes
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user; // Store current user
                userEmailElement.textContent = user.email;
                loadUserProfile(user); // Load profile data for the current user
                showTab('profile'); // Default to profile tab on load
            } else {
                // User is signed out, redirect to login page
                window.location.href = 'login.html';
            }
        });

        // Handle Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                // Redirect will happen via onAuthStateChanged listener
            } catch (error) {
                console.error("Error signing out:", error);
                alert("Failed to log out. Please try again."); // Consider a custom modal
            }
        });

        // Handle Save Profile
        saveProfileBtn.addEventListener('click', async (e) => {
            e.preventDefault(); // Prevent default form submission

            if (!currentUser) {
                showStatusMessage(profileStatusMessage, "No user logged in.", "error");
                return;
            }

            saveProfileBtnText.classList.add('hidden');
            saveProfileSpinner.classList.remove('hidden');
            saveProfileBtn.disabled = true;

            // Get values from all input fields
            const newName = profileNameInput.value.trim();
            const newBio = profileBioInput.value.trim();
            const newContact = profileContactInput.value.trim();
            const newGender = profileGenderInput.value;
            const newDob = profileDobInput.value;
            const newAddress = profileAddressInput.value.trim();
            const newCity = profileCityInput.value.trim();
            const newState = profileStateInput.value.trim();
            const newPincode = profilePincodeInput.value.trim();
            const newQualification = profileQualificationInput.value;
            const newSkills = profileSkillsInput.value.trim();
            const newLinkedIn = profileLinkedInInput.value.trim();
            const newInstagram = profileInstagramInput.value.trim();
            const newCommunicationMethod = profileCommunicationMethodInput.value;

            try {
                // 1. Update Firebase Authentication profile (displayName only)
                await updateProfile(currentUser, {
                    displayName: newName,
                });

                // 2. Update all profile data in Firestore
                const userDocRef = doc(db, 'users', currentUser.uid);
                await setDoc(userDocRef, {
                    displayName: newName,
                    bio: newBio,
                    contactNumber: newContact,
                    gender: newGender,
                    dob: newDob,
                    address: newAddress,
                    city: newCity,
                    state: newState,
                    pincode: newPincode,
                    qualification: newQualification,
                    skills: newSkills,
                    linkedin: newLinkedIn,
                    instagram: newInstagram,
                    communicationMethod: newCommunicationMethod,
                    updatedAt: new Date() // Add a timestamp for last update
                }, { merge: true }); // Use merge: true to only update specified fields

                showStatusMessage(profileStatusMessage, "Profile updated successfully!", "success");

                // Refresh UI with potentially updated data from Firestore
                loadUserProfile(currentUser);

            } catch (error) {
                console.error("Error updating profile:", error);
                showStatusMessage(profileStatusMessage, `Failed to update profile: ${error.message}`, "error");
            } finally {
                saveProfileBtnText.classList.remove('hidden');
                saveProfileSpinner.classList.add('hidden');
                saveProfileBtn.disabled = false;
            }
        });

        // Handle Submit Project
        submitProjectBtn.addEventListener('click', async (e) => {
            e.preventDefault();

            if (!currentUser) {
                showStatusMessage(projectStatusMessage, "Please log in to submit a project.", "error");
                return;
            }

            submitProjectBtnText.classList.add('hidden');
            submitProjectSpinner.classList.remove('hidden');
            submitProjectBtn.disabled = true;

            const projectData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: projectTitleInput.value.trim(),
                description: projectDescriptionInput.value.trim(),
                teamMembers: projectTeamMembersInput.value.trim().split(',').map(m => m.trim()).filter(m => m),
                technologies: projectTechnologiesInput.value.trim().split(',').map(t => t.trim()).filter(t => t),
                url: projectUrlInput.value.trim(),
                status: projectStatusInput.value,
                submittedAt: new Date()
            };

            // Basic validation
            if (!projectData.title || !projectData.description || !projectData.status) {
                showStatusMessage(projectStatusMessage, "Please fill in all required project fields (Title, Description, Status).", "error");
                submitProjectBtnText.classList.remove('hidden');
                submitProjectSpinner.classList.add('hidden');
                submitProjectBtn.disabled = false;
                return;
            }

            try {
                // Add a new document to the 'projects' collection
                await addDoc(collection(db, 'projects'), projectData);
                showStatusMessage(projectStatusMessage, "Project submitted successfully!", "success");
                // Clear form
                projectForm.reset();
            } catch (error) {
                console.error("Error submitting project:", error);
                showStatusMessage(projectStatusMessage, `Failed to submit project: ${error.message}`, "error");
            } finally {
                submitProjectBtnText.classList.remove('hidden');
                submitProjectSpinner.classList.add('hidden');
                submitProjectBtn.disabled = false;
            }
        });

        // Handle Submit Idea
        submitIdeaBtn.addEventListener('click', async (e) => {
            e.preventDefault();

            if (!currentUser) {
                showStatusMessage(ideaStatusMessage, "Please log in to submit an idea.", "error");
                return;
            }

            submitIdeaBtnText.classList.add('hidden');
            submitIdeaSpinner.classList.remove('hidden');
            submitIdeaBtn.disabled = true;

            const ideaData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: ideaTitleInput.value.trim(),
                description: ideaDescriptionInput.value.trim(),
                problemSolved: ideaProblemSolvedInput.value.trim(),
                targetAudience: ideaTargetAudienceInput.value.trim(),
                innovationLevel: ideaInnovationLevelInput.value,
                submittedAt: new Date()
            };

            // Basic validation
            if (!ideaData.title || !ideaData.description || !ideaData.problemSolved || !ideaData.innovationLevel) {
                showStatusMessage(ideaStatusMessage, "Please fill in all required idea fields (Title, Description, Problem Solved, Innovation Level).", "error");
                submitIdeaBtnText.classList.remove('hidden');
                submitIdeaSpinner.classList.add('hidden');
                submitIdeaBtn.disabled = false;
                return;
            }

            try {
                // Add a new document to the 'ideas' collection
                await addDoc(collection(db, 'ideas'), ideaData);
                showStatusMessage(ideaStatusMessage, "Idea submitted successfully!", "success");
                // Clear form
                ideaForm.reset();
            } catch (error) {
                console.error("Error submitting idea:", error);
                showStatusMessage(ideaStatusMessage, `Failed to submit idea: ${error.message}`, "error");
            } finally {
                submitIdeaBtnText.classList.remove('hidden');
                submitIdeaSpinner.classList.add('hidden');
                submitIdeaBtn.disabled = false;
            }
        });

        // Handle Submit Event
        submitEventBtn.addEventListener('click', async (e) => {
            e.preventDefault();

            if (!currentUser) {
                showStatusMessage(eventStatusMessage, "Please log in to submit an event.", "error");
                return;
            }

            submitEventBtnText.classList.add('hidden');
            submitEventSpinner.classList.remove('hidden');
            submitEventBtn.disabled = true;

            const eventData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: eventTitleInput.value.trim(),
                description: eventDescriptionInput.value.trim(),
                venue: eventVenueInput.value.trim(),
                organizer: eventOrganizerInput.value.trim(),
                registrationUrl: eventRegistrationUrlInput.value.trim(),
                submittedAt: new Date()
            };

            // Basic validation
            if (!eventData.title || !eventData.description || !eventData.venue) {
                showStatusMessage(eventStatusMessage, "Please fill in all required event fields (Title, Description, Venue).", "error");
                submitEventBtnText.classList.remove('hidden');
                submitEventSpinner.classList.add('hidden');
                submitEventBtn.disabled = false;
                return;
            }

            try {
                // Add a new document to the 'events' collection
                await addDoc(collection(db, 'events'), eventData);
                showStatusMessage(eventStatusMessage, "Event submitted successfully!", "success");
                // Clear form
                eventForm.reset();
            } catch (error) {
                console.error("Error submitting event:", error);
                showStatusMessage(eventStatusMessage, `Failed to submit event: ${error.message}`, "error");
            } finally {
                submitEventBtnText.classList.remove('hidden');
                submitEventSpinner.classList.add('hidden');
                submitEventBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
