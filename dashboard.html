<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - MET'S IEDC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text for contrast */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background-color: #2d3748; /* Slightly lighter dark for header */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* More prominent shadow */
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        main {
            flex-grow: 1;
            padding: 3rem 0; /* Increased padding */
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        footer {
            background-color: #1a202c; /* Consistent dark footer */
            color: #a0aec0;
            padding: 2.5rem 0;
            text-align: center;
            border-top: 1px solid #4a5568; /* Subtle border */
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem; /* Increased horizontal padding */
        }
        .text-brand-primary {
            color: #667eea; /* A vibrant purple-blue */
        }
        .bg-brand-primary {
            background-color: #667eea;
        }
        .hover\:bg-brand-primary-dark:hover {
            background-color: #5a67d8; /* Darker purple-blue on hover */
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-left-color: #ffffff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tab-button {
            padding: 0.9rem 2rem; /* Larger padding */
            border-radius: 9999px; /* Pill shape */
            font-weight: 600;
            color: #a0aec0; /* Lighter gray for inactive tabs */
            transition: all 0.3s ease-in-out;
            background-color: #2d3748; /* Darker background for tabs */
            margin: 0 0.5rem; /* Space between tabs */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .tab-button.active {
            background-color: #667eea; /* Primary accent color for active tab */
            color: #ffffff;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.4); /* Glow effect */
            transform: translateY(-2px);
        }
        .tab-button:hover:not(.active) {
            color: #cbd5e1;
            background-color: #4a5568; /* Slightly lighter dark on hover */
            transform: translateY(-1px);
        }
        .tab-content {
            /* Removed display: none; and display: block; from here.
               Visibility is now controlled by Tailwind's 'hidden' class. */
            padding: 2.5rem; /* Increased padding for content */
            background-color: #2d3748; /* Content background */
            border-radius: 1rem; /* More rounded corners */
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.3), 0 5px 10px -5px rgba(0, 0, 0, 0.1); /* Deeper shadow */
            border: 1px solid #4a5568; /* Subtle border */
        }
        /* Form input styling */
        input[type="text"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        input[type="url"],
        textarea,
        select {
            background-color: #4a5568; /* Darker input background */
            border: 1px solid #667eea; /* Primary accent border */
            border-radius: 0.75rem; /* More rounded corners */
            padding: 0.9rem 1.25rem; /* Increased padding */
            color: #e2e8f0; /* Light text color */
            transition: all 0.2s ease-in-out;
            font-size: 1rem;
        }
        input[type="text"]::placeholder,
        textarea::placeholder {
            color: #a0aec0; /* Lighter placeholder text */
        }
        input[type="text"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        input[type="number"]:focus,
        input[type="url"]:focus,
        textarea:focus,
        select:focus {
            border-color: #805ad5; /* A slightly different accent on focus */
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.3); /* More prominent focus ring */
            outline: none;
        }
        /* Button styling */
        button[type="submit"],
        .action-button {
            padding: 1rem 2rem; /* Larger buttons */
            font-weight: 700;
            border-radius: 0.75rem; /* Rounded button corners */
            transition: all 0.3s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Deeper button shadow */
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        button[type="submit"]:hover,
        .action-button:hover {
            transform: translateY(-3px); /* More pronounced lift on hover */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Even deeper shadow on hover */
        }
        /* Specific button colors */
        .bg-green-600 { background-color: #48bb78; } /* Tailwind green-500 */
        .hover\:bg-green-700:hover { background-color: #38a169; } /* Tailwind green-600 */
        .bg-blue-600 { background-color: #667eea; } /* Primary purple-blue */
        .hover\:bg-blue-700:hover { background-color: #5a67d8; } /* Darker purple-blue */
        .bg-purple-600 { background-color: #805ad5; } /* Tailwind violet-500 */
        .hover\:bg-purple-700:hover { background-color: #6b46c1; } /* Tailwind violet-600 */
        .bg-orange-600 { background-color: #ed8936; } /* Tailwind orange-500 */
        .hover\:bg-orange-700:hover { background-color: #dd6b20; } /* Tailwind orange-600 */
        .bg-red-600 { background-color: #f56565; } /* Tailwind red-500 */
        .hover\:bg-red-700:hover { background-color: #e53e3e; } /* Tailwind red-600 */

        /* Status Message Styling */
        .status-message {
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .status-message.error {
            background-color: #fed7d7; /* Red-100 */
            color: #c53030; /* Red-700 */
            border: 1px solid #fc8181; /* Red-400 */
        }
        .status-message.success {
            background-color: #c6f6d5; /* Green-100 */
            color: #2f855a; /* Green-700 */
            border: 1px solid #68d391; /* Green-400 */
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .tab-content.grid {
                grid-template-columns: 1fr 1.2fr; /* Adjust column ratio for profile section */
            }
        }
        /* Profile Info specific styling */
        .profile-info-item {
            display: flex;
            align-items: center;
            gap: 0.75rem; /* Space between icon and text */
            padding: 0.5rem 0;
            border-bottom: 1px dashed #4a5568; /* Subtle dashed line */
        }
        .profile-info-item:last-child {
            border-bottom: none; /* No border for the last item */
        }
        .profile-info-item svg {
            color: #667eea; /* Icon color */
            flex-shrink: 0; /* Prevent icon from shrinking */
        }
    </style>
</head>
<body>

    <header>
        <div class="container flex items-center justify-between">
            <a href="index.html" class="flex items-center space-x-3">
                <img src="https://placehold.co/50x50/667eea/FFFFFF?text=IEDC" alt="IEDC Logo" class="h-12 w-12 rounded-full shadow-lg">
                <span class="text-3xl font-extrabold text-brand-primary">MET'S IEDC</span>
            </a>
            <nav>
                <button id="logoutBtn" class="action-button px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700">Logout</button>
            </nav>
        </div>
    </header>

    <main>
        <div class="max-w-5xl w-full mx-4">
            <h1 class="text-4xl font-extrabold text-white mb-4 text-center">Your Personal Dashboard</h1>
            <p class="text-lg text-gray-400 mb-8 text-center">Manage your profile, projects, ideas, and events.</p>
            <p class="text-md text-gray-500 mb-8 text-center">Logged in as: <span id="userEmail" class="font-semibold text-brand-primary">Loading...</span></p>

            <div class="flex flex-wrap justify-center border-b border-gray-700 mb-8 bg-gray-800 rounded-t-lg shadow-xl py-2">
                <button id="profileTabBtn" class="tab-button active" onclick="showTab('profile')">My Profile</button>
                <button id="submitProjectTabBtn" class="tab-button" onclick="showTab('submitProject')">Submit Project</button>
                <button id="submitIdeaTabBtn" class="tab-button" onclick="showTab('submitIdea')">Submit Idea</button>
                <button id="submitEventTabBtn" class="tab-button" onclick="showTab('submitEvent')">Submit Event</button>
            </div>

            <div id="profileSection" class="tab-content grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="p-6 bg-gray-700 rounded-lg border border-gray-600 shadow-inner flex flex-col items-center">
                    <h3 class="text-2xl font-bold text-white mb-5 border-b pb-3 border-gray-600 w-full text-center">Your Profile Information</h3>

                    <div class="w-32 h-32 rounded-full bg-gray-600 flex items-center justify-center text-gray-300 text-5xl font-bold mb-6 border-4 border-brand-primary shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    </div>

                    <div class="space-y-2 text-gray-300 w-full">
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                            <span class="font-semibold text-white">Name:</span> <span id="displayNameOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                            <span class="font-semibold text-white">Bio:</span> <span id="bioOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.79 19.79 0 0 1 2 2.18 2 2 0 0 1 4.08 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-1.18 2.19l-.7.48a17.45 17.45 0 0 0 6.29 6.29l.48-.7a2 2 0 0 1 2.19-1.18 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                            <span class="font-semibold text-white">Contact:</span> <span id="contactNumberOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><path d="M14 19a6 6 0 0 0-12 0"/><circle cx="8" cy="9" r="4"/><path d="M22 19a6 6 0 0 0-12 0"/><circle cx="16" cy="9" r="4"/></svg>
                            <span class="font-semibold text-white">Gender:</span> <span id="genderOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                            <span class="font-semibold text-white">Date of Birth:</span> <span id="dobOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin"><path d="M12 18.3a.9.9 0 0 1-.9-.9c0-.4.3-.9.9-.9s.9.4.9.9c0 .4-.3.9-.9.9Z"/><path d="M12 22s8-4 8-10c0-4.4-3.6-8-8-8s-8 3.6-8 8c0 6 8 10 8 10Z"/></svg>
                            <span class="font-semibold text-white">Address:</span> <span id="addressOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building"><rect width="16" height="20" x="4" y="2" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg>
                            <span class="font-semibold text-white">City:</span> <span id="cityOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map"><path d="M14.5 4l2.4 2.4"/><path d="M9.5 19.5l-1.4-1.4"/><path d="M2 8.5V2h6.5L22 17.5V22h-6.5L2 8.5Z"/></svg>
                            <span class="font-semibold text-white">State:</span> <span id="stateOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail-open"><path d="M21.2 8.4c.5.38.8.97.8 1.6V19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V10c0-.63.25-1.22.79-1.6L12 2l9.2 6.4Z"/><path d="M22 19V9l-10 7L2 9v10"/></svg>
                            <span class="font-semibold text-white">Pincode:</span> <span id="pincodeOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                            <span class="font-semibold text-white">Qualification:</span> <span id="qualificationOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wrench"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                            <span class="font-semibold text-white">Skills:</span> <span id="skillsOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                            <span class="font-semibold text-white">LinkedIn:</span> <span id="linkedinOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.07 1.645.07 4.85s-.012 3.584-.07 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.251-.148-4.771-1.691-4.919-4.919-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.149-3.227 1.664-4.771 4.919-4.919 1.266-.058 1.644-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.947.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.668-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162S15.403 5.838 12 5.838zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                            <span class="font-semibold text-white">Instagram:</span> <span id="instagramOutput">Not set</span>
                        </div>
                        <div class="profile-info-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                            <span class="font-semibold text-white">Preferred Communication:</span> <span id="communicationOutput">Not set</span>
                        </div>
                    </div>
                </div>

                <div class="text-left p-6 bg-gray-800 rounded-lg shadow-md border border-gray-700">
                    <div id="profileFormContainer">
                        <h2 class="text-2xl font-bold text-white mb-6">Update Your Profile</h2>
                        <div id="profileStatusMessage" class="status-message hidden"></div>

                        <form id="profileForm" class="space-y-4">
                            <div>
                                <label for="profileName" class="block text-gray-300 text-sm font-bold mb-2">Name:</label>
                                <input type="text" id="profileName" class="w-full" placeholder="Your Full Name">
                            </div>

                            <div>
                                <label for="profileBio" class="block text-gray-300 text-sm font-bold mb-2">Bio:</label>
                                <textarea id="profileBio" rows="3" class="w-full" placeholder="Tell us about yourself..."></textarea>
                            </div>

                            <div>
                                <label for="profileContact" class="block text-gray-300 text-sm font-bold mb-2">Contact Number:</label>
                                <input type="tel" id="profileContact" class="w-full" placeholder="e.g., +91 9876543210">
                            </div>

                            <div>
                                <label for="profileGender" class="block text-gray-300 text-sm font-bold mb-2">Gender:</label>
                                <select id="profileGender" class="w-full">
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Prefer not to say">Prefer not to say</option>
                                </select>
                            </div>

                            <div>
                                <label for="profileDob" class="block text-gray-300 text-sm font-bold mb-2">Date of Birth:</label>
                                <input type="date" id="profileDob" class="w-full">
                            </div>

                            <div>
                                <label for="profileAddress" class="block text-gray-300 text-sm font-bold mb-2">Address:</label>
                                <textarea id="profileAddress" rows="2" class="w-full" placeholder="Street, Locality"></textarea>
                            </div>

                            <div>
                                <label for="profileCity" class="block text-gray-300 text-sm font-bold mb-2">City:</label>
                                <input type="text" id="profileCity" class="w-full" placeholder="Your City">
                            </div>

                            <div>
                                <label for="profileState" class="block text-gray-300 text-sm font-bold mb-2">State:</label>
                                <input type="text" id="profileState" class="w-full" placeholder="Your State">
                            </div>

                            <div>
                                <label for="profilePincode" class="block text-gray-300 text-sm font-bold mb-2">Pincode:</label>
                                <input type="number" id="profilePincode" class="w-full" placeholder="e.g., 680001">
                            </div>

                            <div>
                                <label for="profileQualification" class="block text-gray-300 text-sm font-bold mb-2">Educational Qualification:</label>
                                <select id="profileQualification" class="w-full">
                                    <option value="">Select Qualification</option>
                                    <option value="High School">High School</option>
                                    <option value="Diploma">Diploma</option>
                                    <option value="Bachelor's Degree">Bachelor's Degree</option>
                                    <option value="Master's Degree">Master's Degree</option>
                                    <option value="PhD">PhD</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>

                            <div>
                                <label for="profileSkills" class="block text-gray-300 text-sm font-bold mb-2">Skills (comma-separated):</label>
                                <input type="text" id="profileSkills" class="w-full" placeholder="e.g., JavaScript, Python, UI/UX Design">
                            </div>

                            <hr class="border-gray-600 my-4">

                            <h3 class="text-lg font-bold text-white mb-2">Social & Web Links</h3>
                            <div>
                                <label for="profileLinkedIn" class="block text-gray-300 text-sm font-bold mb-2">LinkedIn Profile URL:</label>
                                <input type="url" id="profileLinkedIn" class="w-full" placeholder="https://linkedin.com/in/yourprofile">
                            </div>
                            <div>
                                <label for="profileInstagram" class="block text-gray-300 text-sm font-bold mb-2">Instagram Profile URL:</label>
                                <input type="url" id="profileInstagram" class="w-full" placeholder="https://instagram.com/yourhandle">
                            </div>

                            <hr class="border-gray-600 my-4">

                            <h3 class="text-lg font-bold text-white mb-2">Communication Preferences</h3>
                            <div>
                                <label for="profileCommunicationMethod" class="block text-gray-300 text-sm font-bold mb-2">Preferred Communication Method:</label>
                                <select id="profileCommunicationMethod" class="w-full">
                                    <option value="">Select Method</option>
                                    <option value="Email">Email</option>
                                    <option value="Phone">Phone</option>
                                    <option value="WhatsApp">WhatsApp</option>
                                    <option value="Telegram">Telegram</option>
                                </select>
                            </div>

                            <button type="submit" id="saveProfileBtn" class="action-button w-full bg-green-600 text-white flex items-center justify-center">
                                <span id="saveProfileBtnText">Save Profile</span>
                                <div id="saveProfileSpinner" class="loading-spinner ml-2 hidden"></div>
                            </button>
                        </form>
                    </div>

                    <div id="profileUpdatedMessage" class="hidden text-center py-10">
                        <svg class="mx-auto h-16 w-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <p class="text-xl font-semibold text-white mt-4">Profile Updated Successfully!</p>
                        <p class="text-gray-400 mt-2">Your changes have been saved.</p>
                        <button id="editProfileAgainBtn" class="action-button mt-6 px-6 py-3 bg-blue-600 text-white">
                            Edit Profile
                        </button>
                    </div>
                </div>
            </div>

            <div id="submitProjectSection" class="tab-content hidden">
                <h2 class="text-2xl font-bold text-white mb-6 text-left">Submit a New Project</h2>
                <div id="projectStatusMessage" class="status-message hidden"></div>

                <form id="projectForm" class="space-y-4 text-left">
                    <div>
                        <label for="projectTitle" class="block text-gray-300 text-sm font-bold mb-2">Project Title:</label>
                        <input type="text" id="projectTitle" class="w-full" placeholder="e.g., Smart Waste Management System">
                    </div>
                    <div>
                        <label for="projectDescription" class="block text-gray-300 text-sm font-bold mb-2">Project Description:</label>
                        <textarea id="projectDescription" rows="4" class="w-full" placeholder="Briefly describe your project, its purpose, and key features."></textarea>
                    </div>
                    <div>
                        <label for="projectTeamMembers" class="block text-gray-300 text-sm font-bold mb-2">Team Members (comma-separated):</label>
                        <input type="text" id="projectTeamMembers" class="w-full" placeholder="e.g., John Doe, Jane Smith">
                    </div>
                    <div>
                        <label for="projectTechnologies" class="block text-gray-300 text-sm font-bold mb-2">Technologies Used (comma-separated):</label>
                        <input type="text" id="projectTechnologies" class="w-full" placeholder="e.g., Python, Arduino, Machine Learning">
                    </div>
                    <div>
                        <label for="projectUrl" class="block text-gray-300 text-sm font-bold mb-2">Project URL (Optional):</label>
                        <input type="url" id="projectUrl" class="w-full" placeholder="https://github.com/yourproject">
                    </div>
                    <div>
                        <label for="projectStatus" class="block text-gray-300 text-sm font-bold mb-2">Project Status:</label>
                        <select id="projectStatus" class="w-full">
                            <option value="">Select Status</option>
                            <option value="Idea Phase">Idea Phase</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Completed">Completed</option>
                            <option value="Deployed">Deployed</option>
                        </select>
                    </div>
                    <button type="submit" id="submitProjectBtn" class="action-button w-full bg-blue-600 text-white flex items-center justify-center">
                        <span id="submitProjectBtnText">Submit Project</span>
                        <div id="submitProjectSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

            <div id="submitIdeaSection" class="tab-content hidden">
                <h2 class="text-2xl font-bold text-white mb-6 text-left">Submit a New Idea</h2>
                <div id="ideaStatusMessage" class="status-message hidden"></div>

                <form id="ideaForm" class="space-y-4 text-left">
                    <div>
                        <label for="ideaTitle" class="block text-gray-300 text-sm font-bold mb-2">Idea Title:</label>
                        <input type="text" id="ideaTitle" class="w-full" placeholder="e.g., AI-Powered Study Buddy">
                    </div>
                    <div>
                        <label for="ideaDescription" class="block text-gray-300 text-sm font-bold mb-2">Idea Description:</label>
                        <textarea id="ideaDescription" rows="4" class="w-full" placeholder="Explain your idea in detail. What is it? How does it work?"></textarea>
                    </div>
                    <div>
                        <label for="ideaProblemSolved" class="block text-gray-300 text-sm font-bold mb-2">Problem Solved:</label>
                        <textarea id="ideaProblemSolved" rows="2" class="w-full" placeholder="What real-world problem does your idea address?"></textarea>
                    </div>
                    <div>
                        <label for="ideaTargetAudience" class="block text-gray-300 text-sm font-bold mb-2">Target Audience:</label>
                        <input type="text" id="ideaTargetAudience" class="w-full" placeholder="e.g., College students, Small businesses">
                    </div>
                    <div>
                        <label for="ideaInnovationLevel" class="block text-gray-300 text-sm font-bold mb-2">Innovation Level:</label>
                        <select id="ideaInnovationLevel" class="w-full">
                            <option value="">Select Level</option>
                            <option value="Incremental">Incremental Improvement</option>
                            <option value="Moderate">Moderate Innovation</option>
                            <option value="Disruptive">Disruptive Innovation</option>
                        </select>
                    </div>
                    <button type="submit" id="submitIdeaBtn" class="action-button w-full bg-purple-600 text-white flex items-center justify-center">
                        <span id="submitIdeaBtnText">Submit Idea</span>
                        <div id="submitIdeaSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

            <div id="submitEventSection" class="tab-content hidden">
                <h2 class="text-2xl font-bold text-white mb-6 text-left">Submit a New Event</h2>
                <div id="eventStatusMessage" class="status-message hidden"></div>

                <form id="eventForm" class="space-y-4 text-left">
                    <div>
                        <label for="eventTitle" class="block text-gray-300 text-sm font-bold mb-2">Event Title:</label>
                        <input type="text" id="eventTitle" class="w-full" placeholder="e.g., Annual Hackathon 2025">
                    </div>
                    <div>
                        <label for="eventDescription" class="block text-gray-300 text-sm font-bold mb-2">Event Description:</label>
                        <textarea id="eventDescription" rows="4" class="w-full" placeholder="Provide a detailed description of the event."></textarea>
                    </div>
                    <div>
                        <label for="eventVenue" class="block text-gray-300 text-sm font-bold mb-2">Event Venue:</label>
                        <input type="text" id="eventVenue" class="w-full" placeholder="e.g., College Auditorium, Online">
                    </div>
                    <div>
                        <label for="eventOrganizer" class="block text-gray-300 text-sm font-bold mb-2">Organizer (Optional):</label>
                        <input type="text" id="eventOrganizer" class="w-full" placeholder="e.g., IEDC Core Team">
                    </div>
                    <div>
                        <label for="eventRegistrationUrl" class="block text-gray-300 text-sm font-bold mb-2">Registration URL (Optional):</label>
                        <input type="url" id="eventRegistrationUrl" class="w-full" placeholder="https://forms.gle/event_registration">
                    </div>
                    <button type="submit" id="submitEventBtn" class="action-button w-full bg-orange-600 text-white flex items-center justify-center">
                        <span id="submitEventBtnText">Submit Event</span>
                        <div id="submitEventSpinner" class="loading-spinner ml-2 hidden"></div>
                    </button>
                </form>
            </div>

        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 MET'S IEDC. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAIn9hB7Hx4Nwwk5Ar9bE3tFuo40VkBcc8",
            authDomain: "metsiedc-3010e.firebaseapp.com",
            databaseURL: "https://metsiedc-3010e-default-rtdb.firebaseio.com",
            projectId: "metsiedc-3010e",
            messagingSenderId: "954403413150",
            appId: "1:954403413150:web:2523a3377f15a3d6002f8f",
            measurementId: "G-6E7EK0D7JG"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app); // Initialize Firestore

        // Global variable to store current user object
        let currentUser = null;

        // --- DOM Elements ---
        // General
        const userEmailElement = document.getElementById('userEmail');
        const logoutBtn = document.getElementById('logoutBtn');

        // Tabs
        const profileTabBtn = document.getElementById('profileTabBtn');
        const submitProjectTabBtn = document.getElementById('submitProjectTabBtn');
        const submitIdeaTabBtn = document.getElementById('submitIdeaTabBtn');
        const submitEventTabBtn = document.getElementById('submitEventTabBtn');

        const profileSection = document.getElementById('profileSection');
        const submitProjectSection = document.getElementById('submitProjectSection');
        const submitIdeaSection = document.getElementById('submitIdeaSection');
        const submitEventSection = document.getElementById('submitEventSection');

        // Profile Form Inputs
        const profileNameInput = document.getElementById('profileName');
        const profileBioInput = document.getElementById('profileBio');
        const profileContactInput = document.getElementById('profileContact');
        const profileGenderInput = document.getElementById('profileGender');
        const profileDobInput = document.getElementById('profileDob');
        const profileAddressInput = document.getElementById('profileAddress');
        const profileCityInput = document.getElementById('profileCity');
        const profileStateInput = document.getElementById('profileState');
        const profilePincodeInput = document.getElementById('profilePincode');
        const profileQualificationInput = document.getElementById('profileQualification');
        const profileSkillsInput = document.getElementById('profileSkills');
        const profileLinkedInInput = document.getElementById('profileLinkedIn');
        const profileInstagramInput = document.getElementById('profileInstagram');
        const profileCommunicationMethodInput = document.getElementById('profileCommunicationMethod');

        // Profile Display Outputs
        const displayNameOutput = document.getElementById('displayNameOutput');
        const bioOutput = document.getElementById('bioOutput');
        const contactNumberOutput = document.getElementById('contactNumberOutput');
        const genderOutput = document.getElementById('genderOutput');
        const dobOutput = document.getElementById('dobOutput');
        const addressOutput = document.getElementById('addressOutput');
        const cityOutput = document.getElementById('cityOutput');
        const stateOutput = document.getElementById('stateOutput');
        const pincodeOutput = document.getElementById('pincodeOutput');
        const qualificationOutput = document.getElementById('qualificationOutput');
        const skillsOutput = document.getElementById('skillsOutput');
        const linkedinOutput = document.getElementById('linkedinOutput');
        const instagramOutput = document.getElementById('instagramOutput');
        const communicationOutput = document.getElementById('communicationOutput');

        // Profile Save Button & Status
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const saveProfileBtnText = document.getElementById('saveProfileBtnText');
        const saveProfileSpinner = document.getElementById('saveProfileSpinner');
        const profileStatusMessage = document.getElementById('profileStatusMessage');

        // New Profile Section elements for showing/hiding form
        const profileFormContainer = document.getElementById('profileFormContainer');
        const profileUpdatedMessage = document.getElementById('profileUpdatedMessage');
        const editProfileAgainBtn = document.getElementById('editProfileAgainBtn');


        // Project Form Inputs
        const projectTitleInput = document.getElementById('projectTitle');
        const projectDescriptionInput = document.getElementById('projectDescription');
        const projectTeamMembersInput = document.getElementById('projectTeamMembers');
        const projectTechnologiesInput = document.getElementById('projectTechnologies');
        const projectUrlInput = document.getElementById('projectUrl');
        const projectStatusInput = document.getElementById('projectStatus');

        // Project Submit Button & Status
        const submitProjectBtn = document.getElementById('submitProjectBtn');
        const submitProjectBtnText = document.getElementById('submitProjectBtnText');
        const submitProjectSpinner = document.getElementById('submitProjectSpinner');
        const projectStatusMessage = document.getElementById('projectStatusMessage');

        // Idea Form Inputs
        const ideaTitleInput = document.getElementById('ideaTitle');
        const ideaDescriptionInput = document.getElementById('ideaDescription');
        const ideaProblemSolvedInput = document.getElementById('ideaProblemSolved');
        const ideaTargetAudienceInput = document.getElementById('ideaTargetAudience');
        const ideaInnovationLevelInput = document.getElementById('ideaInnovationLevel');

        // Idea Submit Button & Status
        const submitIdeaBtn = document.getElementById('submitIdeaBtn');
        const submitIdeaBtnText = document.getElementById('submitIdeaBtnText');
        const submitIdeaSpinner = document.getElementById('submitIdeaSpinner');
        const ideaStatusMessage = document.getElementById('ideaStatusMessage');

        // Event Form Inputs
        const eventTitleInput = document.getElementById('eventTitle');
        const eventDescriptionInput = document.getElementById('eventDescription');
        const eventVenueInput = document.getElementById('eventVenue');
        const eventOrganizerInput = document.getElementById('eventOrganizer');
        const eventRegistrationUrlInput = document.getElementById('eventRegistrationUrl');

        // Event Submit Button & Status
        const submitEventBtn = document.getElementById('submitEventBtn');
        const submitEventBtnText = document.getElementById('submitEventBtnText');
        const submitEventSpinner = document.getElementById('submitEventSpinner');
        const eventStatusMessage = document.getElementById('eventStatusMessage');


        // --- Functions ---

        // Function to display status messages for forms
        function showStatusMessage(element, message, type = 'error') { /* Default to error for safety */
            element.textContent = message;
            element.classList.remove('hidden', 'status-message', 'error', 'success'); /* Clear all status classes */
            element.classList.add('status-message', type); /* Add base and type class */
            element.classList.remove('hidden');
            setTimeout(() => {
                element.classList.add('hidden');
            }, 5000); // Hide after 5 seconds
        }

        // Function to switch tabs
        window.showTab = function(tabName) {
            console.log(`Activating tab: ${tabName}`);

            // Get all tab content sections and buttons
            const allTabSections = [profileSection, submitProjectSection, submitIdeaSection, submitEventSection];
            const allTabButtons = [profileTabBtn, submitProjectTabBtn, submitIdeaTabBtn, submitEventTabBtn];

            // Deactivate all tab buttons and hide all tab contents using Tailwind's 'hidden' class
            allTabButtons.forEach(btn => btn.classList.remove('active'));
            allTabSections.forEach(section => section.classList.add('hidden')); // Ensure all are hidden

            // Activate the selected tab button and show its content by removing 'hidden'
            if (tabName === 'profile') {
                profileTabBtn.classList.add('active');
                profileSection.classList.remove('hidden');
            } else if (tabName === 'submitProject') {
                submitProjectTabBtn.classList.add('active');
                submitProjectSection.classList.remove('hidden');
            } else if (tabName === 'submitIdea') {
                submitIdeaTabBtn.classList.add('active');
                submitIdeaSection.classList.remove('hidden');
            } else if (tabName === 'submitEvent') {
                submitEventTabBtn.classList.add('active');
                submitEventSection.classList.remove('hidden');
            }
        }

        // Function to load user profile from Firestore
        async function loadUserProfile(user) {
            const userDocRef = doc(db, 'users', user.uid);
            try {
                const userDocSnap = await getDoc(userDocRef);
                let data = {};
                if (userDocSnap.exists()) {
                    data = userDocSnap.data();
                    console.log("User profile data loaded:", data);

                    // Populate form fields
                    profileNameInput.value = data.displayName || '';
                    profileBioInput.value = data.bio || '';
                    profileContactInput.value = data.contactNumber || '';
                    profileGenderInput.value = data.gender || '';
                    profileDobInput.value = data.dob || ''; // Date input expectsYYYY-MM-DD
                    profileAddressInput.value = data.address || '';
                    profileCityInput.value = data.city || '';
                    profileStateInput.value = data.state || '';
                    profilePincodeInput.value = data.pincode || '';
                    profileQualificationInput.value = data.qualification || '';
                    profileSkillsInput.value = data.skills || '';
                    profileLinkedInInput.value = data.linkedin || '';
                    profileInstagramInput.value = data.instagram || '';
                    profileCommunicationMethodInput.value = data.communicationMethod || '';

                    // Update display section
                    displayNameOutput.textContent = data.displayName || 'Not set';
                    bioOutput.textContent = data.bio || 'Not set';
                    contactNumberOutput.textContent = data.contactNumber || 'Not set';
                    genderOutput.textContent = data.gender || 'Not set';
                    dobOutput.textContent = data.dob || 'Not set';
                    addressOutput.textContent = data.address || 'Not set';
                    cityOutput.textContent = data.city || 'Not set';
                    stateOutput.textContent = data.state || 'Not set';
                    pincodeOutput.textContent = data.pincode || 'Not set';
                    qualificationOutput.textContent = data.qualification || 'Not set';
                    skillsOutput.textContent = data.skills || 'Not set';
                    linkedinOutput.textContent = data.linkedin || 'Not set';
                    instagramOutput.textContent = data.instagram || 'Not set';
                    communicationOutput.textContent = data.communicationMethod || 'Not set';

                } else {
                    console.log("User document does not exist, creating a basic one.");
                    // If user document doesn't exist, create a basic one with default empty values
                    await setDoc(userDocRef, {
                        email: user.email,
                        displayName: user.displayName || '',
                        bio: '',
                        contactNumber: '',
                        gender: '',
                        dob: '',
                        address: '',
                        city: '',
                        state: '',
                        pincode: '',
                        qualification: '',
                        skills: '',
                        linkedin: '',
                        instagram: '',
                        communicationMethod: '',
                        createdAt: new Date()
                    }, { merge: true });
                    profileNameInput.value = user.displayName || '';

                    // Update display section with defaults
                    displayNameOutput.textContent = user.displayName || 'Not set';
                    bioOutput.textContent = 'Not set';
                    contactNumberOutput.textContent = 'Not set';
                    genderOutput.textContent = 'Not set';
                    dobOutput.textContent = 'Not set';
                    addressOutput.textContent = 'Not set';
                    cityOutput.textContent = 'Not set';
                    stateOutput.textContent = 'Not set';
                    pincodeOutput.textContent = 'Not set';
                    qualificationOutput.textContent = 'Not set';
                    skillsOutput.textContent = 'Not set';
                    linkedinOutput.textContent = 'Not set';
                    instagramOutput.textContent = 'Not set';
                    communicationOutput.textContent = 'Not set';
                }

                // Determine whether to show the form or the updated message initially
                // Check if displayName is present and not empty
                const isProfilePopulated = data.displayName && data.displayName.trim() !== '';
                console.log("Is profile populated?", isProfilePopulated);

                if (isProfilePopulated) {
                    profileFormContainer.classList.add('hidden');
                    profileUpdatedMessage.classList.remove('hidden');
                    console.log("Hiding form, showing updated message.");
                } else {
                    profileFormContainer.classList.remove('hidden');
                    profileUpdatedMessage.classList.add('hidden');
                    console.log("Showing form, hiding updated message.");
                }


            } catch (error) {
                console.error("Error loading user profile:", error);
                showStatusMessage(profileStatusMessage, "Failed to load profile data.", "error");
            }
        }

        // --- Event Listeners ---

        // Listen for authentication state changes
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user; // Store current user
                userEmailElement.textContent = user.email;
                console.log("Auth state changed: User logged in.", user.email);
                loadUserProfile(user); // Load profile data for the current user
                showTab('profile'); // Default to profile tab on load
            } else {
                // User is signed out, redirect to login page
                console.log("Auth state changed: User logged out, redirecting to login.html");
                window.location.href = 'login.html';
            }
        });

        // Handle Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                console.log("User signed out.");
                // Redirect will happen via onAuthStateChanged listener
            } catch (error) {
                console.error("Error signing out:", error);
                // Using alert for now, but consider a custom modal
                alert("Failed to log out. Please try again.");
            }
        });

        // Handle Save Profile
        saveProfileBtn.addEventListener('click', async (e) => {
            e.preventDefault(); // Prevent default form submission
            console.log("Save Profile button clicked.");

            if (!currentUser) {
                showStatusMessage(profileStatusMessage, "No user logged in.", "error");
                console.warn("Save Profile: No current user.");
                return;
            }

            saveProfileBtnText.classList.add('hidden');
            saveProfileSpinner.classList.remove('hidden');
            saveProfileBtn.disabled = true;

            // Get values from all input fields
            const newName = profileNameInput.value.trim();
            const newBio = profileBioInput.value.trim();
            const newContact = profileContactInput.value.trim();
            const newGender = profileGenderInput.value;
            const newDob = profileDobInput.value;
            const newAddress = profileAddressInput.value.trim();
            const newCity = profileCityInput.value.trim();
            const newState = profileStateInput.value.trim();
            const newPincode = profilePincodeInput.value.trim();
            const newQualification = profileQualificationInput.value;
            const newSkills = profileSkillsInput.value.trim();
            const newLinkedIn = profileLinkedInInput.value.trim();
            const newInstagram = profileInstagramInput.value.trim();
            const newCommunicationMethod = profileCommunicationMethodInput.value;

            try {
                // 1. Update Firebase Authentication profile (displayName only)
                await updateProfile(currentUser, {
                    displayName: newName,
                });
                console.log("Firebase Auth profile updated.");

                // 2. Update all profile data in Firestore
                const userDocRef = doc(db, 'users', currentUser.uid);
                await setDoc(userDocRef, {
                    displayName: newName,
                    bio: newBio,
                    contactNumber: newContact,
                    gender: newGender,
                    dob: newDob,
                    address: newAddress,
                    city: newCity,
                    state: newState,
                    pincode: newPincode,
                    qualification: newQualification,
                    skills: newSkills,
                    linkedin: newLinkedIn,
                    instagram: newInstagram,
                    communicationMethod: newCommunicationMethod,
                    updatedAt: new Date() // Add a timestamp for last update
                }, { merge: true }); // Use merge: true to only update specified fields
                console.log("Firestore user document updated.");

                showStatusMessage(profileStatusMessage, "Profile updated successfully!", "success");

                // After successful update, hide the form and show the updated message
                profileFormContainer.classList.add('hidden');
                profileUpdatedMessage.classList.remove('hidden');
                console.log("Form hidden, updated message shown.");

                // Refresh UI with potentially updated data from Firestore
                await loadUserProfile(currentUser); // Ensure data is re-loaded and displayed
                console.log("loadUserProfile called after save.");

            } catch (error) {
                console.error("Error updating profile:", error);
                showStatusMessage(profileStatusMessage, `Failed to update profile: ${error.message}`, "error");
            } finally {
                saveProfileBtnText.classList.remove('hidden');
                saveProfileSpinner.classList.add('hidden');
                saveProfileBtn.disabled = false;
                console.log("Save Profile process finished.");
            }
        });

        // Handle "Edit Profile" button click (from the updated message)
        editProfileAgainBtn.addEventListener('click', () => {
            console.log("Edit Profile button clicked.");
            profileUpdatedMessage.classList.add('hidden');
            profileFormContainer.classList.remove('hidden');
            profileStatusMessage.classList.add('hidden'); // Clear any old status message
            console.log("Updated message hidden, form shown.");
        });


        // Handle Submit Project
        submitProjectBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            console.log("Submit Project button clicked.");

            if (!currentUser) {
                showStatusMessage(projectStatusMessage, "Please log in to submit a project.", "error");
                return;
            }

            submitProjectBtnText.classList.add('hidden');
            submitProjectSpinner.classList.remove('hidden');
            submitProjectBtn.disabled = true;

            const projectData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: projectTitleInput.value.trim(),
                description: projectDescriptionInput.value.trim(),
                teamMembers: projectTeamMembersInput.value.trim().split(',').map(m => m.trim()).filter(m => m),
                technologies: projectTechnologiesInput.value.trim().split(',').map(t => t.trim()).filter(t => t),
                url: projectUrlInput.value.trim(),
                status: projectStatusInput.value,
                submittedAt: new Date()
            };

            // Basic validation
            if (!projectData.title || !projectData.description || !projectData.status) {
                showStatusMessage(projectStatusMessage, "Please fill in all required project fields (Title, Description, Status).", "error");
                submitProjectBtnText.classList.remove('hidden');
                submitProjectSpinner.classList.add('hidden');
                submitProjectBtn.disabled = false;
                console.warn("Project submission: Missing required fields.");
                return;
            }

            try {
                // Add a new document to the 'projects' collection
                await addDoc(collection(db, 'projects'), projectData);
                showStatusMessage(projectStatusMessage, "Project submitted successfully!", "success");
                // Clear form
                projectForm.reset();
                console.log("Project submitted successfully.");
            } catch (error) {
                console.error("Error submitting project:", error);
                showStatusMessage(projectStatusMessage, `Failed to submit project: ${error.message}`, "error");
            } finally {
                submitProjectBtnText.classList.remove('hidden');
                submitProjectSpinner.classList.add('hidden');
                submitProjectBtn.disabled = false;
            }
        });

        // Handle Submit Idea
        submitIdeaBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            console.log("Submit Idea button clicked.");

            if (!currentUser) {
                showStatusMessage(ideaStatusMessage, "Please log in to submit an idea.", "error");
                return;
            }

            submitIdeaBtnText.classList.add('hidden');
            submitIdeaSpinner.classList.remove('hidden');
            submitIdeaBtn.disabled = true;

            const ideaData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: ideaTitleInput.value.trim(),
                description: ideaDescriptionInput.value.trim(),
                problemSolved: ideaProblemSolvedInput.value.trim(),
                targetAudience: ideaTargetAudienceInput.value.trim(),
                innovationLevel: ideaInnovationLevelInput.value,
                submittedAt: new Date()
            };

            // Basic validation
            if (!ideaData.title || !ideaData.description || !ideaData.problemSolved || !ideaData.innovationLevel) {
                showStatusMessage(ideaStatusMessage, "Please fill in all required idea fields (Title, Description, Problem Solved, Innovation Level).", "error");
                submitIdeaBtnText.classList.remove('hidden');
                submitIdeaSpinner.classList.add('hidden');
                submitIdeaBtn.disabled = false;
                console.warn("Idea submission: Missing required fields.");
                return;
            }

            try {
                // Add a new document to the 'ideas' collection
                await addDoc(collection(db, 'ideas'), ideaData);
                showStatusMessage(ideaStatusMessage, "Idea submitted successfully!", "success");
                // Clear form
                ideaForm.reset();
                console.log("Idea submitted successfully.");
            } catch (error) {
                console.error("Error submitting idea:", error);
                showStatusMessage(ideaStatusMessage, `Failed to submit idea: ${error.message}`, "error");
            } finally {
                submitIdeaBtnText.classList.remove('hidden');
                submitIdeaSpinner.classList.add('hidden');
                submitIdeaBtn.disabled = false;
            }
        });

        // Handle Submit Event
        submitEventBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            console.log("Submit Event button clicked.");

            if (!currentUser) {
                showStatusMessage(eventStatusMessage, "Please log in to submit an event.", "error");
                return;
            }

            submitEventBtnText.classList.add('hidden');
            submitEventSpinner.classList.remove('hidden');
            submitEventBtn.disabled = true;

            const eventData = {
                userId: currentUser.uid,
                userEmail: currentUser.email,
                title: eventTitleInput.value.trim(),
                description: eventDescriptionInput.value.trim(),
                venue: eventVenueInput.value.trim(),
                organizer: eventOrganizerInput.value.trim(),
                registrationUrl: eventRegistrationUrlInput.value.trim(),
                submittedAt: new Date()
            };

            // Basic validation
            if (!eventData.title || !eventData.description || !eventData.venue) {
                showStatusMessage(eventStatusMessage, "Please fill in all required event fields (Title, Description, Venue).", "error");
                submitEventBtnText.classList.remove('hidden');
                submitEventSpinner.classList.add('hidden');
                submitEventBtn.disabled = false;
                console.warn("Event submission: Missing required fields.");
                return;
            }

            try {
                // Add a new document to the 'events' collection
                await addDoc(collection(db, 'events'), eventData);
                showStatusMessage(eventStatusMessage, "Event submitted successfully!", "success");
                // Clear form
                eventForm.reset();
                console.log("Event submitted successfully.");
            } catch (error) {
                console.error("Error submitting event:", error);
                showStatusMessage(eventStatusMessage, `Failed to submit event: ${error.message}`, "error");
            } finally {
                submitEventBtnText.classList.remove('hidden');
                submitEventSpinner.classList.add('hidden');
                submitEventBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
